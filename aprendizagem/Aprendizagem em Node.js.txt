================== Todo o nosso código que fizemos para fazer o Hello World, criar a base da nossa aplicação e entender os conceitos de Rotas, Recursos, Métodos HTTP e Parâmetros ===================

/// server.ts

import express from 'express';

const app = express();

app.use(express.json());

/* app.get('/users', () => {
    console.log('Listagem de usuários');
}) */

const users =  [
  {                 // ID 0
      "nome": "Yasmim", 
      "cargo": "Mulher mais Linda do mundo!",
      "idade": "16"
  },

  {               // ID 1 
    "nome": "Thalles", 
    "cargo": "FullStack Developer",
    "idade": "16"
  }
]

app.get('/users', (request, response) => { 
  //  response.send('Hello World!')
    const search = String(request.query.search); // Sempre podemos ter vários parâmetros no Query Param, então fizemos com que ele nunca retorna um vetor.

    const filteredUsers = search ? users.filter(user => user.nome.includes(search)) : users; // Condição Ternária porque o Query Param ele pode não existir, já que é opcional, então devemos fazer uma condiação pra caso ele exista ou não.

    return response.json(filteredUsers)
})

app.get('/users/:id', (request, response) => {
    const id = Number(request.params.id); // Requisição nos parametros da minha rota com o nome do parametro (id)

    const user = users[id];

    return response.json(user)
})

app.post('/users', (request, response) => {
    const data = request.body;

    console.log(data)

    const user = {
      name: data.name,
      email: data.email
    };

    return response.json(user)
})

/* REQUEST:
      Serve para obter dados da requisição está sendo feita na nossa aplicação.
    
    RESPONSE:
      Serve para devolvermos uma resposta.
*/
app.listen(3333);





// package.JSON

{
  "name": "server",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "dev": "ts-node-dev src/server.ts"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "express": "^4.17.1"
  },
  "devDependencies": {
    "@types/express": "^4.17.6",
    "ts-node": "^8.10.2",
    "ts-node-dev": "^1.0.0-pre.44",
    "typescript": "^3.9.3"
  }
}
